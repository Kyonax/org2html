{"version":3,"sources":["../src/parser/lexer.ts","../src/parser/ast.ts","../src/parser/metadata.ts","../src/parser/parser.ts","../src/renderer/sanitizer.ts","../src/plugins/code-highlight.ts","../src/plugins/toc.ts","../src/renderer/html-renderer.ts","../src/renderer/template.ts","../src/index.ts"],"sourcesContent":["export type TokenType =\n  | 'HEADING'\n  | 'LIST_ITEM'\n  | 'CODE_BLOCK_START'\n  | 'CODE_BLOCK_END'\n  | 'BLOCK_START'\n  | 'BLOCK_END'\n  | 'TABLE_ROW'\n  | 'DRAWER_START'\n  | 'DRAWER_END'\n  | 'SHORTCODE'\n  | 'PARAGRAPH'\n  | 'BLANK'\n  | 'TEXT'\n\nexport interface Token {\n  type: TokenType\n  value: string\n  line: number\n  indent: number\n  properties?: Record<string, any>\n}\n\nexport function tokenize(content: string): Token[] {\n  const lines = content.split('\\n')\n  const tokens: Token[] = []\n\n  for (let i = 0; i < lines.length; i++) {\n    const line = lines[i]\n    const trimmed = line.trim()\n    const indent = line.length - line.trimStart().length\n\n    // Blank line\n    if (!trimmed) {\n      tokens.push({ type: 'BLANK', value: '', line: i, indent })\n      continue\n    }\n\n    // Heading\n    const headingMatch = trimmed.match(/^(\\*+)\\s+(.*)$/)\n    if (headingMatch) {\n      const level = headingMatch[1].length\n      const text = headingMatch[2]\n      tokens.push({\n        type: 'HEADING',\n        value: text,\n        line: i,\n        indent,\n        properties: { level },\n      })\n      continue\n    }\n\n    // Code block\n    if (trimmed.match(/^#\\+BEGIN_SRC\\s*/i)) {\n      const langMatch = trimmed.match(/^#\\+BEGIN_SRC\\s+(\\w+)/i)\n      tokens.push({\n        type: 'CODE_BLOCK_START',\n        value: '',\n        line: i,\n        indent,\n        properties: { language: langMatch?.[1] || '' },\n      })\n      continue\n    }\n\n    if (trimmed.match(/^#\\+END_SRC/i)) {\n      tokens.push({ type: 'CODE_BLOCK_END', value: '', line: i, indent })\n      continue\n    }\n\n    // Special blocks\n    const blockStartMatch = trimmed.match(/^#\\+BEGIN_(\\w+)/i)\n    if (blockStartMatch) {\n      tokens.push({\n        type: 'BLOCK_START',\n        value: '',\n        line: i,\n        indent,\n        properties: { blockType: blockStartMatch[1].toUpperCase() },\n      })\n      continue\n    }\n\n    const blockEndMatch = trimmed.match(/^#\\+END_(\\w+)/i)\n    if (blockEndMatch) {\n      tokens.push({\n        type: 'BLOCK_END',\n        value: '',\n        line: i,\n        indent,\n        properties: { blockType: blockEndMatch[1].toUpperCase() },\n      })\n      continue\n    }\n\n    // Drawer\n    if (trimmed.match(/^:(\\w+):$/)) {\n      tokens.push({\n        type: 'DRAWER_START',\n        value: trimmed,\n        line: i,\n        indent,\n        properties: { name: trimmed.slice(1, -1) },\n      })\n      continue\n    }\n\n    if (trimmed === ':END:') {\n      tokens.push({ type: 'DRAWER_END', value: '', line: i, indent })\n      continue\n    }\n\n    // Table row\n    if (trimmed.startsWith('|')) {\n      tokens.push({ type: 'TABLE_ROW', value: trimmed, line: i, indent })\n      continue\n    }\n\n    // List item\n    const listMatch = trimmed.match(/^([-+*]|\\d+[.)])\\s+(.*)$/)\n    if (listMatch) {\n      const ordered = /^\\d+[.)]/.test(listMatch[1])\n      tokens.push({\n        type: 'LIST_ITEM',\n        value: listMatch[2],\n        line: i,\n        indent,\n        properties: { ordered },\n      })\n      continue\n    }\n\n    // Shortcode\n    const shortcodeMatch = trimmed.match(/^\\{\\{<\\s*(\\w+)(.*)>\\}\\}/)\n    if (shortcodeMatch) {\n      tokens.push({\n        type: 'SHORTCODE',\n        value: trimmed,\n        line: i,\n        indent,\n        properties: { component: shortcodeMatch[1] },\n      })\n      continue\n    }\n\n    // Regular text/paragraph\n    tokens.push({ type: 'TEXT', value: line, line: i, indent })\n  }\n\n  return tokens\n}\n","import type { AstNode, NodeType, OrgMetadata } from '../types.js'\n\nexport function createNode(\n  type: NodeType,\n  properties?: Record<string, any>,\n  children?: AstNode[]\n): AstNode {\n  return {\n    type,\n    ...(properties && { properties }),\n    ...(children && { children }),\n  }\n}\n\nexport function createTextNode(value: string): AstNode {\n  return {\n    type: 'text',\n    value,\n  }\n}\n\nexport function createDocument(metadata: OrgMetadata, children: AstNode[]): AstNode {\n  return {\n    type: 'document',\n    metadata,\n    children,\n  }\n}\n","import type { OrgMetadata, OrgOptions } from \"../types.js\"\nimport slugify from \"slugify\"\n\nconst METADATA_KEYS = [\n  \"TITLE\",\n  \"AUTHOR\",\n  \"DATE\",\n  \"EMAIL\",\n  \"DESCRIPTION\",\n  \"KEYWORDS\",\n  \"LANGUAGE\",\n  \"CATEGORY\",\n  \"FILETAGS\",\n  \"OPTIONS\",\n  \"EXPORT_FILE_NAME\",\n  \"CANONICAL\",\n  \"COVER_IMAGE\",\n  \"OG_IMAGE\",\n  \"OG_TITLE\",\n  \"OG_DESCRIPTION\",\n  \"OG_TYPE\",\n  \"TWITTER_CARD\",\n  \"TWITTER_SITE\",\n  \"TWITTER_CREATOR\",\n  \"THEME_COLOR\",\n  \"ROBOTS\",\n]\n\nexport function extractMetadata(lines: string[]): {\n  metadata: OrgMetadata\n  contentStartLine: number\n} {\n  const metadata: OrgMetadata = {\n    options: {},\n    properties: {},\n    tags: [],\n    keywords: [],\n  }\n\n  let i = 0\n  let inPropertyDrawer = false\n  const propertyDrawerProps: Record<string, string> = {}\n\n  // Parse metadata lines at the top\n  while (i < lines.length) {\n    const line = lines[i].trim()\n\n    // Property drawer\n    if (line === \":PROPERTIES:\") {\n      inPropertyDrawer = true\n      i++\n      continue\n    }\n\n    if (line === \":END:\" && inPropertyDrawer) {\n      inPropertyDrawer = false\n      metadata.properties = { ...metadata.properties, ...propertyDrawerProps }\n      i++\n      continue\n    }\n\n    if (inPropertyDrawer) {\n      const propMatch = line.match(/^:(\\w+):\\s*(.*)$/)\n      if (propMatch) {\n        propertyDrawerProps[propMatch[1]] = propMatch[2]\n      }\n      i++\n      continue\n    }\n\n    // Metadata lines\n    const metaMatch = line.match(/^#\\+(\\w+):\\s*(.*)$/i)\n    if (metaMatch) {\n      const key = metaMatch[1].toUpperCase()\n      const value = metaMatch[2].trim()\n\n      switch (key) {\n        case \"TITLE\":\n          metadata.title = value\n          break\n        case \"AUTHOR\":\n          metadata.author = value\n          break\n        case \"DATE\":\n          metadata.date = value\n          break\n        case \"EMAIL\":\n          metadata.email = value\n          break\n        case \"DESCRIPTION\":\n          metadata.description = value\n          break\n        case \"KEYWORDS\":\n          metadata.keywords = value.split(\",\").map((k) => k.trim())\n          break\n        case \"LANGUAGE\":\n          metadata.language = value\n          break\n        case \"CATEGORY\":\n          metadata.category = value\n          break\n        case \"FILETAGS\":\n          metadata.tags = parseFileTags(value)\n          break\n        case \"OPTIONS\":\n          metadata.options = { ...metadata.options, ...parseOptions(value) }\n          break\n        case \"CANONICAL\":\n          metadata.canonical = value\n          break\n        case \"COVER_IMAGE\":\n          metadata.coverImage = value\n          break\n        case \"OG_IMAGE\":\n          metadata.ogImage = value\n          break\n        case \"OG_TITLE\":\n          metadata.ogTitle = value\n          break\n        case \"OG_DESCRIPTION\":\n          metadata.ogDescription = value\n          break\n        case \"OG_TYPE\":\n          metadata.ogType = value\n          break\n        case \"TWITTER_CARD\":\n          metadata.twitterCard = value as any\n          break\n        case \"TWITTER_SITE\":\n          metadata.twitterSite = value\n          break\n        case \"TWITTER_CREATOR\":\n          metadata.twitterCreator = value\n          break\n        case \"THEME_COLOR\":\n          metadata.themeColor = value\n          break\n        case \"ROBOTS\":\n          metadata.robots = value\n          break\n        default:\n          // Store unknown metadata\n          if (!metadata.properties) metadata.properties = {}\n          metadata.properties[key] = value\n      }\n      i++\n      continue\n    }\n\n    // Stop when we hit content\n    if (line && !line.startsWith(\"#\") && !line.startsWith(\":\")) {\n      break\n    }\n\n    i++\n  }\n\n  // Generate slug\n  if (metadata.title) {\n    metadata.slug = slugify(metadata.title, { lower: true, strict: true })\n  }\n\n  return { metadata, contentStartLine: i }\n}\n\nfunction parseFileTags(value: string): string[] {\n  // Parse :tag1:tag2:tag3: format\n  const tags = value.match(/:(\\w+)/g)\n  return tags ? tags.map((t) => t.substring(1)) : []\n}\n\nexport function parseOptions(optionsString: string): OrgOptions {\n  const options: OrgOptions = {}\n\n  // Split by whitespace, handling quoted values\n  const parts = optionsString.match(/(\\w+):(\\S+)/g) || []\n\n  for (const part of parts) {\n    const [key, value] = part.split(\":\")\n\n    switch (key.toLowerCase()) {\n      case \"toc\":\n        options.toc = value === \"nil\" ? false : value === \"t\" ? true : Number.parseInt(value, 10)\n        break\n      case \"num\":\n        options.num = value !== \"nil\"\n        break\n      case \"date\":\n        options.date = value !== \"nil\"\n        break\n      case \"h\":\n        options.H = Number.parseInt(value, 10)\n        break\n      case \"author\":\n        options.author = value !== \"nil\"\n        break\n      case \"email\":\n        options.email = value !== \"nil\"\n        break\n      case \"title\":\n        options.title = value !== \"nil\"\n        break\n      case \"_\":\n        options.subscript = value !== \"nil\"\n        break\n      case \"^\":\n        options.superscript = value !== \"nil\"\n        break\n      case \"tex\":\n        options.tex = value !== \"nil\"\n        break\n      default:\n        // Store unknown options\n        options[key] = value === \"nil\" ? false : value === \"t\" ? true : value\n    }\n  }\n\n  return options\n}\n\nexport function calculateReadingTime(text: string): number {\n  const wordsPerMinute = 200\n  const words = text.split(/\\s+/).length\n  return Math.ceil(words / wordsPerMinute)\n}\n\nexport function extractExcerpt(text: string, maxLength = 160): string {\n  const cleaned = text.replace(/\\s+/g, \" \").trim()\n  if (cleaned.length <= maxLength) return cleaned\n  return cleaned.substring(0, maxLength).trim() + \"...\"\n}\n","import type { AstNode, OrgAst, OrgMetadata } from '../types.js'\nimport { tokenize, type Token } from './lexer.js'\nimport { createNode, createTextNode, createDocument } from './ast.js'\nimport { extractMetadata, calculateReadingTime, extractExcerpt } from './metadata.js'\n\nexport function parse(content: string): OrgAst {\n  const lines = content.split('\\n')\n  const { metadata, contentStartLine } = extractMetadata(lines)\n\n  const contentLines = lines.slice(contentStartLine)\n  const tokens = tokenize(contentLines.join('\\n'))\n  \n  const children = parseTokens(tokens)\n  \n  // Calculate reading time and excerpt\n  const plainText = extractPlainText(children)\n  metadata.readingTime = calculateReadingTime(plainText)\n  metadata.wordCount = plainText.split(/\\s+/).length\n  \n  if (!metadata.excerpt && metadata.description) {\n    metadata.excerpt = metadata.description\n  } else if (!metadata.excerpt) {\n    metadata.excerpt = extractExcerpt(plainText)\n  }\n  \n  return createDocument(metadata, children) as OrgAst\n}\n\nfunction parseTokens(tokens: Token[]): AstNode[] {\n  const nodes: AstNode[] = []\n  let i = 0\n  \n  while (i < tokens.length) {\n    const token = tokens[i]\n    \n    switch (token.type) {\n      case 'HEADING': {\n        const heading = parseHeading(token)\n        nodes.push(heading)\n        i++\n        break\n      }\n      \n      case 'CODE_BLOCK_START': {\n        const { node, endIndex } = parseCodeBlock(tokens, i)\n        nodes.push(node)\n        i = endIndex + 1\n        break\n      }\n      \n      case 'BLOCK_START': {\n        const { node, endIndex } = parseBlock(tokens, i)\n        nodes.push(node)\n        i = endIndex + 1\n        break\n      }\n      \n      case 'TABLE_ROW': {\n        const { node, endIndex } = parseTable(tokens, i)\n        nodes.push(node)\n        i = endIndex + 1\n        break\n      }\n      \n      case 'LIST_ITEM': {\n        const { node, endIndex } = parseList(tokens, i)\n        nodes.push(node)\n        i = endIndex + 1\n        break\n      }\n      \n      case 'DRAWER_START': {\n        const { node, endIndex } = parseDrawer(tokens, i)\n        if (node) nodes.push(node)\n        i = endIndex + 1\n        break\n      }\n      \n      case 'SHORTCODE': {\n        const shortcode = parseShortcode(token)\n        nodes.push(shortcode)\n        i++\n        break\n      }\n      \n      case 'TEXT': {\n        const { node, endIndex } = parseParagraph(tokens, i)\n        if (node) nodes.push(node)\n        i = endIndex + 1\n        break\n      }\n      \n      case 'BLANK':\n        i++\n        break\n        \n      default:\n        i++\n    }\n  }\n  \n  return nodes\n}\n\nfunction parseHeading(token: Token): AstNode {\n  const level = token.properties?.level || 1\n  const text = token.value\n  \n  // Parse tags from heading\n  const tagMatch = text.match(/^(.*?)\\s+:([\\w:]+):$/)\n  const content = tagMatch ? tagMatch[1] : text\n  const tags = tagMatch ? tagMatch[2].split(':').filter(Boolean) : []\n  \n  return createNode(\n    'heading',\n    { level, tags },\n    parseInlineMarkup(content)\n  )\n}\n\nfunction parseCodeBlock(tokens: Token[], startIndex: number): { node: AstNode; endIndex: number } {\n  const startToken = tokens[startIndex]\n  const language = startToken.properties?.language || ''\n  const codeLines: string[] = []\n  \n  let i = startIndex + 1\n  while (i < tokens.length && tokens[i].type !== 'CODE_BLOCK_END') {\n    codeLines.push(tokens[i].value)\n    i++\n  }\n  \n  return {\n    node: createNode('codeBlock', { language }, [createTextNode(codeLines.join('\\n'))]),\n    endIndex: i,\n  }\n}\n\nfunction parseBlock(tokens: Token[], startIndex: number): { node: AstNode; endIndex: number } {\n  const startToken = tokens[startIndex]\n  const blockType = startToken.properties?.blockType || 'QUOTE'\n  const contentLines: string[] = []\n  \n  let i = startIndex + 1\n  while (i < tokens.length && tokens[i].type !== 'BLOCK_END') {\n    contentLines.push(tokens[i].value)\n    i++\n  }\n  \n  const content = contentLines.join('\\n')\n  const nodeType = blockType === 'QUOTE' ? 'quote' : \n                   blockType === 'EXAMPLE' ? 'example' :\n                   blockType === 'VERSE' ? 'verse' :\n                   blockType === 'CENTER' ? 'center' : 'quote'\n  \n  return {\n    node: createNode(nodeType, {}, parseInlineMarkup(content)),\n    endIndex: i,\n  }\n}\n\nfunction parseTable(tokens: Token[], startIndex: number): { node: AstNode; endIndex: number } {\n  const rows: AstNode[] = []\n  let i = startIndex\n  \n  while (i < tokens.length && tokens[i].type === 'TABLE_ROW') {\n    const rowValue = tokens[i].value\n    \n    // Skip separator rows\n    if (rowValue.match(/^\\|[-+:| ]+\\|$/)) {\n      i++\n      continue\n    }\n    \n    const cells = rowValue\n      .split('|')\n      .slice(1, -1)\n      .map((cell) => cell.trim())\n    \n    const cellNodes = cells.map((cell) =>\n      createNode('tableCell', {}, parseInlineMarkup(cell))\n    )\n    \n    rows.push(createNode('tableRow', {}, cellNodes))\n    i++\n  }\n  \n  return {\n    node: createNode('table', {}, rows),\n    endIndex: i - 1,\n  }\n}\n\nfunction parseList(tokens: Token[], startIndex: number): { node: AstNode; endIndex: number } {\n  const items: AstNode[] = []\n  const ordered = tokens[startIndex].properties?.ordered || false\n  const baseIndent = tokens[startIndex].indent\n  \n  let i = startIndex\n  \n  while (i < tokens.length && tokens[i].type === 'LIST_ITEM' && tokens[i].indent === baseIndent) {\n    const itemContent = parseInlineMarkup(tokens[i].value)\n    items.push(createNode('listItem', {}, itemContent))\n    i++\n  }\n  \n  return {\n    node: createNode('list', { ordered }, items),\n    endIndex: i - 1,\n  }\n}\n\nfunction parseDrawer(tokens: Token[], startIndex: number): { node: AstNode | null; endIndex: number } {\n  const drawerName = tokens[startIndex].properties?.name || ''\n  const contentLines: string[] = []\n  \n  let i = startIndex + 1\n  while (i < tokens.length && tokens[i].type !== 'DRAWER_END') {\n    contentLines.push(tokens[i].value)\n    i++\n  }\n  \n  // Skip property drawers (already processed in metadata)\n  if (drawerName === 'PROPERTIES') {\n    return { node: null, endIndex: i }\n  }\n  \n  return {\n    node: createNode('drawer', { name: drawerName }, [createTextNode(contentLines.join('\\n'))]),\n    endIndex: i,\n  }\n}\n\nfunction parseShortcode(token: Token): AstNode {\n  const match = token.value.match(/\\{\\{<\\s*(\\w+)(.*?)>\\}\\}/)\n  if (!match) return createTextNode(token.value)\n  \n  const component = match[1]\n  const attrsString = match[2].trim()\n  const attrs: Record<string, string> = {}\n  \n  // Parse attributes\n  const attrMatches = attrsString.matchAll(/(\\w+)=\"([^\"]*)\"/g)\n  for (const attrMatch of attrMatches) {\n    attrs[attrMatch[1]] = attrMatch[2]\n  }\n  \n  return createNode('shortcode', { component, attrs })\n}\n\nfunction parseParagraph(tokens: Token[], startIndex: number): { node: AstNode | null; endIndex: number } {\n  const lines: string[] = []\n  let i = startIndex\n  \n  while (i < tokens.length && tokens[i].type === 'TEXT') {\n    lines.push(tokens[i].value.trim())\n    i++\n  }\n  \n  if (lines.length === 0) return { node: null, endIndex: i - 1 }\n  \n  const content = lines.join(' ')\n  return {\n    node: createNode('paragraph', {}, parseInlineMarkup(content)),\n    endIndex: i - 1,\n  }\n}\n\nfunction parseInlineMarkup(text: string): AstNode[] {\n  const nodes: AstNode[] = []\n  let current = ''\n  let i = 0\n  \n  while (i < text.length) {\n    // Bold: *text*\n    if (text[i] === '*' && text[i + 1] !== ' ') {\n      if (current) {\n        nodes.push(createTextNode(current))\n        current = ''\n      }\n      const end = text.indexOf('*', i + 1)\n      if (end !== -1) {\n        const content = text.substring(i + 1, end)\n        nodes.push(createNode('bold', {}, parseInlineMarkup(content)))\n        i = end + 1\n        continue\n      }\n    }\n    \n    // Italic: /text/\n    if (text[i] === '/' && text[i + 1] !== ' ') {\n      if (current) {\n        nodes.push(createTextNode(current))\n        current = ''\n      }\n      const end = text.indexOf('/', i + 1)\n      if (end !== -1) {\n        const content = text.substring(i + 1, end)\n        nodes.push(createNode('italic', {}, [createTextNode(content)]))\n        i = end + 1\n        continue\n      }\n    }\n    \n    // Underline: _text_\n    if (text[i] === '_' && text[i + 1] !== ' ') {\n      if (current) {\n        nodes.push(createTextNode(current))\n        current = ''\n      }\n      const end = text.indexOf('_', i + 1)\n      if (end !== -1) {\n        const content = text.substring(i + 1, end)\n        nodes.push(createNode('underline', {}, [createTextNode(content)]))\n        i = end + 1\n        continue\n      }\n    }\n    \n    // Code: ~text~ or =text=\n    if ((text[i] === '~' || text[i] === '=') && text[i + 1] !== ' ') {\n      if (current) {\n        nodes.push(createTextNode(current))\n        current = ''\n      }\n      const marker = text[i]\n      const end = text.indexOf(marker, i + 1)\n      if (end !== -1) {\n        const content = text.substring(i + 1, end)\n        nodes.push(createNode(marker === '~' ? 'code' : 'verbatim', {}, [createTextNode(content)]))\n        i = end + 1\n        continue\n      }\n    }\n    \n    // Strike: +text+\n    if (text[i] === '+' && text[i + 1] !== ' ') {\n      if (current) {\n        nodes.push(createTextNode(current))\n        current = ''\n      }\n      const end = text.indexOf('+', i + 1)\n      if (end !== -1) {\n        const content = text.substring(i + 1, end)\n        nodes.push(createNode('strike', {}, [createTextNode(content)]))\n        i = end + 1\n        continue\n      }\n    }\n    \n    // Links: [[url][description]] or [[url]]\n    if (text.substring(i, i + 2) === '[[') {\n      if (current) {\n        nodes.push(createTextNode(current))\n        current = ''\n      }\n      const end = text.indexOf(']]', i + 2)\n      if (end !== -1) {\n        const linkContent = text.substring(i + 2, end)\n        const parts = linkContent.split('][')\n        const url = parts[0]\n        const description = parts[1] || url\n        \n        // Check if it's an image\n        if (url.match(/\\.(png|jpg|jpeg|gif|svg|webp)$/i)) {\n          nodes.push(createNode('image', { src: url, alt: description }))\n        } else {\n          nodes.push(createNode('link', { href: url }, [createTextNode(description)]))\n        }\n        \n        i = end + 2\n        continue\n      }\n    }\n    \n    // Footnotes: [fn:1] or [fn:label]\n    if (text.substring(i, i + 4) === '[fn:') {\n      if (current) {\n        nodes.push(createTextNode(current))\n        current = ''\n      }\n      const end = text.indexOf(']', i + 4)\n      if (end !== -1) {\n        const ref = text.substring(i + 4, end)\n        nodes.push(createNode('footnote', { ref }))\n        i = end + 1\n        continue\n      }\n    }\n    \n    // Line break: \\\\\n    if (text.substring(i, i + 2) === '\\\\\\\\') {\n      if (current) {\n        nodes.push(createTextNode(current))\n        current = ''\n      }\n      nodes.push(createNode('lineBreak', {}))\n      i += 2\n      continue\n    }\n    \n    current += text[i]\n    i++\n  }\n  \n  if (current) {\n    nodes.push(createTextNode(current))\n  }\n  \n  return nodes\n}\n\nfunction extractPlainText(nodes: AstNode[]): string {\n  let text = ''\n  \n  for (const node of nodes) {\n    if (node.value) {\n      text += node.value + ' '\n    }\n    if (node.children) {\n      text += extractPlainText(node.children) + ' '\n    }\n  }\n  \n  return text\n}\n","import DOMPurify from 'dompurify'\nimport { JSDOM } from 'jsdom'\n\nconst window = new JSDOM('').window\nconst purify = DOMPurify(window as any)\n\nexport function sanitizeHtml(html: string): string {\n  return purify.sanitize(html, {\n    ALLOWED_TAGS: [\n      'h1', 'h2', 'h3', 'h4', 'h5', 'h6',\n      'p', 'br', 'hr',\n      'strong', 'em', 'u', 'del', 'code', 'pre',\n      'a', 'img',\n      'ul', 'ol', 'li',\n      'table', 'thead', 'tbody', 'tr', 'th', 'td',\n      'blockquote', 'div', 'span',\n      'sup', 'sub',\n    ],\n    ALLOWED_ATTR: [\n      'href', 'src', 'alt', 'title', 'class', 'id',\n      'data-component', 'data-props',\n    ],\n    ALLOW_DATA_ATTR: true,\n  })\n}\n","import { getHighlighter, type Highlighter } from 'shiki'\n\nlet highlighter: Highlighter | null = null\n\nexport async function highlightCode(code: string, language: string): Promise<string> {\n  if (!highlighter) {\n    highlighter = await getHighlighter({\n      themes: ['github-dark', 'github-light'],\n      langs: ['javascript', 'typescript', 'python', 'rust', 'go', 'java', 'html', 'css', 'json', 'markdown'],\n    })\n  }\n  \n  try {\n    return highlighter.codeToHtml(code, {\n      lang: language || 'text',\n      theme: 'github-dark',\n    })\n  } catch (error) {\n    // Fallback if language not supported\n    return `<pre><code>${escapeHtml(code)}</code></pre>`\n  }\n}\n\nfunction escapeHtml(text: string): string {\n  return text\n    .replace(/&/g, '&amp;')\n    .replace(/</g, '&lt;')\n    .replace(/>/g, '&gt;')\n}\n","export function generateToc(\n  headings: Array<{ level: number; text: string; id: string }>,\n  maxDepth: number = 3\n): string {\n  if (headings.length === 0) return ''\n  \n  let html = '<nav class=\"toc\"><h2>Table of Contents</h2><ul>'\n  let currentLevel = headings[0].level\n  \n  for (const heading of headings) {\n    if (heading.level > maxDepth) continue\n    \n    while (heading.level > currentLevel) {\n      html += '<ul>'\n      currentLevel++\n    }\n    \n    while (heading.level < currentLevel) {\n      html += '</ul>'\n      currentLevel--\n    }\n    \n    html += `<li><a href=\"#${heading.id}\">${escapeHtml(heading.text)}</a></li>`\n  }\n  \n  while (currentLevel > headings[0].level) {\n    html += '</ul>'\n    currentLevel--\n  }\n  \n  html += '</ul></nav>\\n'\n  return html\n}\n\nfunction escapeHtml(text: string): string {\n  return text\n    .replace(/&/g, '&amp;')\n    .replace(/</g, '&lt;')\n    .replace(/>/g, '&gt;')\n}\n","// src/renderer/html-renderer.ts\nimport type { AstNode, OrgAst, RenderOptions, RenderResult } from '../types.js'\nimport { sanitizeHtml } from './sanitizer.js'\nimport { highlightCode } from '../plugins/code-highlight.js'\nimport { generateToc } from '../plugins/toc.js'\n\n/**\n * Minimal internal node typing for renderer conveniences.\n * We accept the external AstNode type but coerce accessed fields as needed.\n */\ntype RNode = {\n  type: string\n  value?: unknown\n  properties?: Record<string, unknown>\n  children?: RNode[]\n}\n\nexport async function renderToHtml(ast: OrgAst, options: RenderOptions = {}): Promise<RenderResult> {\n  const context = {\n    options,\n    footnotes: new Map<string, string>(),\n    footnoteCounter: 1,\n    headings: [] as Array<{ level: number; text: string; id: string }>,\n  }\n  \n  let bodyHtml = ''\n  \n  for (const node of ast.children as RNode[]) {\n    bodyHtml += await renderNode(node, context)\n  }\n  \n  // Add table of contents if enabled\n  const tocEnabled = ast.metadata.options?.toc !== false\n  let tocHtml = ''\n  if (tocEnabled && context.headings.length > 0) {\n    const tocDepth = typeof ast.metadata.options?.toc === 'number' \n      ? ast.metadata.options.toc \n      : 3\n    tocHtml = generateToc(context.headings, tocDepth)\n  }\n  \n  // Add footnotes section\n  let footnotesHtml = ''\n  if (context.footnotes.size > 0) {\n    footnotesHtml = '<div class=\"footnotes\"><hr><ol>'\n    for (const [ref, content] of context.footnotes) {\n      footnotesHtml += `<li id=\"fn-${escapeHtml(String(ref))}\">${content} <a href=\"#fnref-${escapeHtml(String(ref))}\">â†©</a></li>`\n    }\n    footnotesHtml += '</ol></div>'\n  }\n  \n  const fullHtml = tocHtml + bodyHtml + footnotesHtml\n  \n  // Sanitize if enabled\n  const finalHtml = options.sanitize !== false ? sanitizeHtml(fullHtml) : fullHtml\n  \n  return {\n    html: finalHtml,\n    metadata: ast.metadata,\n  }\n}\n\nasync function renderNode(node: RNode, context: any): Promise<string> {\n  switch (node.type) {\n    case 'heading':\n      return renderHeading(node, context)\n    case 'paragraph':\n      return renderParagraph(node, context)\n    case 'list':\n      return await renderList(node, context)\n    case 'listItem':\n      return await renderListItem(node, context)\n    case 'table':\n      return await renderTable(node, context)\n    case 'tableRow':\n      return await renderTableRow(node, context)\n    case 'tableCell':\n      return await renderTableCell(node, context)\n    case 'codeBlock':\n      return await renderCodeBlock(node, context)\n    case 'quote':\n      return await renderQuote(node, context)\n    case 'example':\n      return await renderExample(node, context)\n    case 'verse':\n      return await renderVerse(node, context)\n    case 'center':\n      return await renderCenter(node, context)\n    case 'shortcode':\n      return renderShortcode(node, context)\n    case 'bold':\n      return `<strong>${await renderChildren(node, context)}</strong>`\n    case 'italic':\n      return `<em>${await renderChildren(node, context)}</em>`\n    case 'underline':\n      return `<u>${await renderChildren(node, context)}</u>`\n    case 'code':\n      return `<code>${await renderChildren(node, context)}</code>`\n    case 'verbatim':\n      return `<code class=\"verbatim\">${await renderChildren(node, context)}</code>`\n    case 'strike':\n      return `<del>${await renderChildren(node, context)}</del>`\n    case 'link':\n      return renderLink(node, context)\n    case 'image':\n      return renderImage(node, context)\n    case 'footnote':\n      return renderFootnote(node, context)\n    case 'lineBreak':\n      return '<br>'\n    case 'text':\n      return escapeHtml(String(node.value ?? ''))\n    default:\n      return ''\n  }\n}\n\nasync function renderChildren(node: RNode, context: any): Promise<string> {\n  if (!node.children) return ''\n  let html = ''\n  for (const child of node.children) {\n    html += await renderNode(child, context)\n  }\n  return html\n}\n\nfunction renderHeading(node: RNode, context: any): string {\n  const level = Math.min(Number(node.properties?.level ?? 1), 6)\n  // coerce child values into strings safely\n  const text = (node.children ?? []).map((c) => String(c.value ?? '')).join('')\n  const id = slugify(text)\n  \n  // Track for TOC\n  context.headings.push({ level, text, id })\n  \n  const numberingEnabled = context.options?.num !== false\n  const headingNumber = numberingEnabled ? '' : '' // TODO: Implement heading numbering\n  \n  return `<h${level} id=\"${escapeHtml(id)}\">${headingNumber}${renderChildrenSync(node)}</h${level}>\\n`\n}\n\nfunction renderParagraph(node: RNode, context: any): string {\n  return `<p>${renderChildrenSync(node)}</p>\\n`\n}\n\nasync function renderList(node: RNode, context: any): Promise<string> {\n  const tag = node.properties?.ordered ? 'ol' : 'ul'\n  const items = await renderChildren(node, context)\n  return `<${tag}>\\n${items}</${tag}>\\n`\n}\n\nasync function renderListItem(node: RNode, context: any): Promise<string> {\n  return `<li>${await renderChildren(node, context)}</li>\\n`\n}\n\nasync function renderTable(node: RNode, context: any): Promise<string> {\n  const rows = await renderChildren(node, context)\n  return `<table>\\n<tbody>\\n${rows}</tbody>\\n</table>\\n`\n}\n\nasync function renderTableRow(node: RNode, context: any): Promise<string> {\n  const cells = await renderChildren(node, context)\n  return `<tr>\\n${cells}</tr>\\n`\n}\n\nasync function renderTableCell(node: RNode, context: any): Promise<string> {\n  return `<td>${await renderChildren(node, context)}</td>\\n`\n}\n\nasync function renderCodeBlock(node: RNode, context: any): Promise<string> {\n  const language = String(node.properties?.language ?? '')\n  const code = String(node.children?.[0]?.value ?? '')\n  \n  if (context.options.codeHighlight !== false) {\n    const highlighted = await highlightCode(code, language)\n    return `<pre><code class=\"language-${escapeHtml(language)}\">${highlighted}</code></pre>\\n`\n  }\n  \n  return `<pre><code class=\"language-${escapeHtml(language)}\">${escapeHtml(code)}</code></pre>\\n`\n}\n\nasync function renderQuote(node: RNode, context: any): Promise<string> {\n  return `<blockquote>\\n${await renderChildren(node, context)}</blockquote>\\n`\n}\n\nasync function renderExample(node: RNode, context: any): Promise<string> {\n  return `<pre class=\"example\">${await renderChildren(node, context)}</pre>\\n`\n}\n\nasync function renderVerse(node: RNode, context: any): Promise<string> {\n  return `<p class=\"verse\">${await renderChildren(node, context)}</p>\\n`\n}\n\nasync function renderCenter(node: RNode, context: any): Promise<string> {\n  return `<div class=\"center\">${await renderChildren(node, context)}</div>\\n`\n}\n\nfunction renderShortcode(node: RNode, context: any): string {\n  const component = String(node.properties?.component ?? '')\n  const attrs = (node.properties?.attrs ?? {}) as Record<string, unknown>\n  \n  const attrString = Object.entries(attrs)\n    .map(([key, value]) => `${escapeHtml(String(key))}=\"${escapeHtml(String(value ?? ''))}\"`)\n    .join(' ')\n  \n  return `<div data-component=\"${escapeHtml(component)}\" ${attrString}></div>\\n`\n}\n\nfunction renderLink(node: RNode, context: any): string {\n  const href = String(node.properties?.href ?? '')\n  const text = renderChildrenSync(node)\n  return `<a href=\"${escapeHtml(href)}\">${text}</a>`\n}\n\nfunction renderImage(node: RNode, context: any): string {\n  const src = String(node.properties?.src ?? '')\n  const alt = String(node.properties?.alt ?? '')\n  return `<img src=\"${escapeHtml(src)}\" alt=\"${escapeHtml(alt)}\">`\n}\n\nfunction renderFootnote(node: RNode, context: any): string {\n  const ref = String(node.properties?.ref ?? '')\n  const num = context.footnoteCounter++\n  context.footnotes.set(ref, `Footnote ${escapeHtml(ref)}`)\n  return `<sup id=\"fnref-${escapeHtml(ref)}\"><a href=\"#fn-${escapeHtml(ref)}\">${num}</a></sup>`\n}\n\nfunction renderChildrenSync(node: RNode): string {\n  if (!node.children) return ''\n  return node.children.map((child) => {\n    if (child.type === 'text') return escapeHtml(String(child.value ?? ''))\n    if (child.type === 'bold') return `<strong>${renderChildrenSync(child)}</strong>`\n    if (child.type === 'italic') return `<em>${renderChildrenSync(child)}</em>`\n    if (child.type === 'code') return `<code>${renderChildrenSync(child)}</code>`\n    if (child.type === 'link') return `<a href=\"${escapeHtml(String(child.properties?.href ?? ''))}\">${renderChildrenSync(child)}</a>`\n    // fallback - recursively render children (safe default)\n    return renderChildrenSync(child)\n  }).join('')\n}\n\nfunction escapeHtml(text: string): string {\n  return text\n    .replace(/&/g, '&amp;')\n    .replace(/</g, '&lt;')\n    .replace(/>/g, '&gt;')\n    .replace(/\"/g, '&quot;')\n    .replace(/'/g, '&#039;')\n}\n\nfunction slugify(text: string): string {\n  return text\n    .toLowerCase()\n    .replace(/[^\\w\\s-]/g, '')\n    .replace(/\\s+/g, '-')\n    .replace(/-+/g, '-')\n    .trim()\n}\n","import { readFile } from \"fs/promises\"\nimport { join, dirname } from \"path\"\nimport { fileURLToPath } from \"url\"\nimport type { OrgMetadata } from \"../types.js\"\n\nconst __filename = fileURLToPath(import.meta.url)\nconst __dirname = dirname(__filename)\n\nexport async function applyTemplate(\n  html: string,\n  metadata: OrgMetadata,\n  templatePath?: string,\n  templateDir?: string,\n): Promise<string> {\n  // Determine template and styles paths\n  let template: string\n  let styles: string\n\n  if (templatePath) {\n    // Custom template provided\n    template = await readFile(templatePath, \"utf-8\")\n    // Try to load custom styles from same directory\n    try {\n      const stylesPath = join(dirname(templatePath), \"styles.css\")\n      styles = await readFile(stylesPath, \"utf-8\")\n    } catch {\n      styles = await getDefaultStyles()\n    }\n  } else if (templateDir) {\n    // Custom template directory provided\n    try {\n      template = await readFile(join(templateDir, \"default.html\"), \"utf-8\")\n      styles = await readFile(join(templateDir, \"styles.css\"), \"utf-8\")\n    } catch {\n      template = await getDefaultTemplate()\n      styles = await getDefaultStyles()\n    }\n  } else {\n    // Use built-in defaults\n    template = await getDefaultTemplate()\n    styles = await getDefaultStyles()\n  }\n\n  const title = metadata.title || \"Untitled\"\n  const description = metadata.description || metadata.excerpt || \"\"\n  const keywords = metadata.keywords?.join(\", \") || \"\"\n  const author = metadata.author || \"\"\n  const date = metadata.date || new Date().toISOString()\n  const language = metadata.language || \"en\"\n  const canonical = metadata.canonical || \"\"\n  const coverImage = metadata.coverImage || metadata.ogImage || \"/default-og-image.png\"\n  const tags = metadata.tags?.join(\", \") || \"\"\n\n  // Open Graph metadata with fallbacks\n  const ogTitle = metadata.ogTitle || title\n  const ogDescription = metadata.ogDescription || description\n  const ogImage = metadata.ogImage || coverImage\n  const ogType = metadata.ogType || \"article\"\n\n  // Twitter Card metadata with fallbacks\n  const twitterCard = metadata.twitterCard || \"summary_large_image\"\n  const twitterSite = metadata.twitterSite || \"\"\n  const twitterCreator = metadata.twitterCreator || \"\"\n\n  // Additional SEO metadata\n  const themeColor = metadata.themeColor || \"#0066cc\"\n  const robots = metadata.robots || \"index, follow\"\n\n  // Generate structured data JSON-LD\n  const structuredData = JSON.stringify({\n    \"@context\": \"https://schema.org\",\n    \"@type\": \"BlogPosting\",\n    headline: title,\n    description: description,\n    author: {\n      \"@type\": \"Person\",\n      name: author || \"Unknown\",\n    },\n    datePublished: date,\n    wordCount: metadata.wordCount || 0,\n    keywords: keywords,\n    image: ogImage,\n  })\n\n  return template\n    .replace(/\\{\\{title\\}\\}/g, escapeHtml(title))\n    .replace(/\\{\\{description\\}\\}/g, escapeHtml(description))\n    .replace(/\\{\\{keywords\\}\\}/g, escapeHtml(keywords))\n    .replace(/\\{\\{author\\}\\}/g, escapeHtml(author))\n    .replace(/\\{\\{date\\}\\}/g, escapeHtml(date))\n    .replace(/\\{\\{language\\}\\}/g, language)\n    .replace(/\\{\\{canonical\\}\\}/g, escapeHtml(canonical))\n    .replace(/\\{\\{coverImage\\}\\}/g, escapeHtml(coverImage))\n    .replace(/\\{\\{tags\\}\\}/g, escapeHtml(tags))\n    .replace(/\\{\\{ogTitle\\}\\}/g, escapeHtml(ogTitle))\n    .replace(/\\{\\{ogDescription\\}\\}/g, escapeHtml(ogDescription))\n    .replace(/\\{\\{ogImage\\}\\}/g, escapeHtml(ogImage))\n    .replace(/\\{\\{ogType\\}\\}/g, escapeHtml(ogType))\n    .replace(/\\{\\{twitterCard\\}\\}/g, escapeHtml(twitterCard))\n    .replace(/\\{\\{twitterSite\\}\\}/g, escapeHtml(twitterSite))\n    .replace(/\\{\\{twitterCreator\\}\\}/g, escapeHtml(twitterCreator))\n    .replace(/\\{\\{themeColor\\}\\}/g, escapeHtml(themeColor))\n    .replace(/\\{\\{robots\\}\\}/g, escapeHtml(robots))\n    .replace(/\\{\\{structuredData\\}\\}/g, structuredData)\n    .replace(/\\{\\{styles\\}\\}/g, styles)\n    .replace(/\\{\\{content\\}\\}/g, html)\n}\n\nasync function getDefaultTemplate(): Promise<string> {\n  const templatePath = join(__dirname, \"../../templates/default.html\")\n  try {\n    return await readFile(templatePath, \"utf-8\")\n  } catch {\n    // Fallback inline template if file not found\n    return `<!DOCTYPE html>\n<html lang=\"{{language}}\">\n<head>\n  <meta charset=\"UTF-8\">\n  <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n  <title>{{title}}</title>\n  <meta name=\"description\" content=\"{{description}}\">\n  <style>{{styles}}</style>\n</head>\n<body>\n  <article>{{content}}</article>\n</body>\n</html>`\n  }\n}\n\nasync function getDefaultStyles(): Promise<string> {\n  const stylesPath = join(__dirname, \"../../templates/styles.css\")\n  try {\n    return await readFile(stylesPath, \"utf-8\")\n  } catch {\n    // Minimal fallback styles\n    return `body { max-width: 800px; margin: 0 auto; padding: 2rem; font-family: system-ui; line-height: 1.6; }`\n  }\n}\n\nfunction escapeHtml(text: string): string {\n  return text\n    .replace(/&/g, \"&amp;\")\n    .replace(/</g, \"&lt;\")\n    .replace(/>/g, \"&gt;\")\n    .replace(/\"/g, \"&quot;\")\n    .replace(/'/g, \"&#039;\")\n}\n","export { parse } from './parser/parser.js'\nexport { renderToHtml } from './renderer/html-renderer.js'\nexport { applyTemplate } from './renderer/template.js'\nexport type * from './types.js'\n\nimport { parse } from './parser/parser.js'\nimport { renderToHtml } from './renderer/html-renderer.js'\nimport { applyTemplate } from './renderer/template.js'\nimport type { RenderOptions, RenderResult } from './types.js'\n\nexport async function org2html(\n  orgContent: string,\n  options: RenderOptions = {}\n): Promise<RenderResult> {\n  const ast = parse(orgContent)\n  const result = await renderToHtml(ast, options)\n  \n  // Always apply template (default or custom)\n  result.html = await applyTemplate(\n    result.html, \n    result.metadata, \n    options.template,\n    options.templateDir\n  )\n  \n  return result\n}\n"],"mappings":"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","names":["escapeHtml","escapeHtml","slugify","escapeHtml"]}